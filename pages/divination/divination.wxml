<view class="container">
  <!-- Mode Switch -->
  <view class="mode-switch" bindtap="toggleMode" wx:if="{{isGyroSupported}}">
    <text class="mode-text">{{mode === 'gyro' ? '切换手动模式' : '切换感应模式'}}</text>
  </view>

  <view class="hint-area">
    <block wx:if="{{status === 'complete'}}">
      <text class="hint-text">卦象已成，点击查看</text>
    </block>
    <block wx:else>
      <text class="hint-text" wx:if="{{mode === 'gyro'}}">{{status === 'shaking' ? '感应中...' : '请摇晃手机起卦'}}</text>
      <text class="hint-text" wx:else>请点击按钮起卦</text>
    </block>
    <text class="sub-hint">{{lines.length}}/6 爻</text>
  </view>

  <view class="lines-area {{status === 'shaking' ? 'shaking-anim' : ''}}">
    <block wx:for="{{lines}}" wx:key="index">
      <view class="line-row fade-in">
        <view class="line-label">
          <text wx:if="{{item === 6}}">X</text>
          <text wx:if="{{item === 9}}">O</text>
        </view>
        
        <view class="line yin" wx:if="{{item === 6 || item === 8}}">
          <view class="bar"></view>
          <view class="gap"></view>
          <view class="bar"></view>
        </view>
        
        <view class="line yang" wx:if="{{item === 7 || item === 9}}">
          <view class="bar-full"></view>
        </view>
      </view>
    </block>
  </view>

  <view class="action-area">
    <button 
      class="action-btn {{status === 'complete' ? 'finish-btn' : ''}}" 
      hover-class="btn-hover" 
      bindtap="handleAction"
      disabled="{{mode === 'gyro' && status !== 'complete'}}"
    >
      {{status === 'complete' ? '查看卦解' : (mode === 'gyro' ? '摇一摇起卦' : '点击摇卦')}}
    </button>
  </view>
</view>
