<view class="container">
  <!-- Loading State -->
  <view class="loading-state" wx:if="{{loading}}">
    <!-- Simple spinner using CSS -->
    <view class="spinner"></view>
    <text>正在解卦，请诚心等待...</text>
  </view>

  <!-- Error State -->
  <view class="error-state" wx:elif="{{error}}">
    <icon type="warn" size="64" color="#F76260"></icon>
    <text class="error-text">{{errorMsg}}</text>
    <button class="retry-btn" bindtap="retryFetch">重试</button>
  </view>

  <!-- Result State -->
  <scroll-view scroll-y class="result-content" wx:else>
    <view class="header">
      <view class="symbol">{{hexagram.symbol}}</view>
      <view class="name">{{hexagram.name}}</view>
    </view>

    <!-- Base Judgement -->
    <view class="card">
      <text class="card-title">卦辞</text>
      <text class="card-body">{{hexagram.judgment}}</text>
    </view>

    <view class="card">
      <text class="card-title">象辞</text>
      <text class="card-body">{{hexagram.image}}</text>
    </view>

    <!-- Main Interpretation -->
    <view class="card highlight">
      <text class="card-title">综合解读</text>
      <text class="card-body interpretation">{{hexagram.interpretation}}</text>
    </view>

    <!-- Changing Lines / Hexagram -->
    <view class="card" wx:if="{{hexagram.is_changing && hexagram.changing_hexagram}}">
      <text class="card-title">变卦：{{hexagram.changing_hexagram.name}} {{hexagram.changing_hexagram.symbol}}</text>
      <view class="sub-card">
        <text class="sub-title">变卦卦辞：</text>
        <text class="card-body">{{hexagram.changing_hexagram.judgment}}</text>
      </view>
      <view class="sub-card">
        <text class="sub-title">变卦解读：</text>
        <text class="card-body">{{hexagram.changing_hexagram.interpretation}}</text>
      </view>
    </view>
    
    <button class="back-btn" hover-class="btn-hover" bindtap="goHome">返回首页，再卜一卦</button>
  </scroll-view>
</view>
